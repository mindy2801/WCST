```{r echo=FALSE}
rm(list=ls())
library(knitr)
library(kableExtra)
load("Code17b_choice_s1-88_iter100.Rdata")
#SDI 1:39, control 40:88
##Table.3
dat_sdi <- parstack[1:39,1:3,5]
dat_control <- parstack[40:88,1:3,5]
mean_s <- apply(dat_sdi,2,mean)
mean_c <- apply(dat_control,2,mean)
median_s <- apply(dat_sdi,2,median)
median_c <- apply(dat_control,2, median)
sd_s <- apply(dat_sdi, 2, sd)
sd_c <- apply(dat_control, 2, sd)
t3 <- rbind(mean_c,mean_s,median_c,median_s,sd_c,sd_s)
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "Original Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
```
##Mean parameters: DY code
```{r echo=FALSE}
load("DY_MLE.Rdata")
#Control 1:49, SDI 50:88
##Table.3
dat_control <- parstack[1:49,1:3,5]
dat_sdi <- parstack[50:88,1:3,5]
mean_s <- apply(dat_sdi,2,mean)
mean_c <- apply(dat_control,2,mean)
median_s <- apply(dat_sdi,2,median)
median_c <- apply(dat_control,2, median)
sd_s <- apply(dat_sdi, 2, sd)
sd_c <- apply(dat_control, 2, sd)
t3 <- rbind(mean_c,mean_s,median_c,median_s,sd_c,sd_s)
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "DY Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
```
##Mean parameters: deleting i
```{r echo=FALSE}
load("constrained.RData")
##Table.3
t3 <- rbind(mean_par, median_par, sd_par) #duplicated rownames
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "Constrained Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
```
##BIC comparisons
```{r echo=FALSE}
#Average BIC
orgin_BIC <- mean(BICfinalmat[,5])
DY_BIC <- mean(r_BIC)
contrained_BIC <- mean(BIC_rpd1)
```
data <- read.table("managed sample data.txt")
head(data)
nrow(data)
library(dplyr)
paste("T",1:128)
paste("T",1:128, sep="")
name <- c(paste("T",1:128, sep=""), paste("outcome", 1:128))
name
name <- c(paste("T",1:128, sep=""), paste("outcome", 1:128, sep=""))
name <- c(paste("T",1:128, sep=""), paste("outcome", 1:128, sep=""), "subjID", "group")
colnames(data) <- name
head(data)
sub <- data[1:3,]
sub
?lapply
lapply(sub[,1:3], function(x) x+1)
sub[,1:#]
sub[,1:3]
sub[,1:3]
data[1,1]
data[1,]
data[,1]
?if
?if
##
matrix(NA, nrow=2*88, ncol=130)
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129]
data$group
data$subjID
rep(data$subjID, each=2)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2)
eampty
empty
?rep
0:3
head(data)
for(j in 0:87) empty[j+1,] <- data[j,1:128]
empty
for(j in 0:87) empty[j+1,1:128] <- data[j,1:128]
empty[1,1:128]
empty
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty
empty[1.1:128]
data[1,1:128]
empty[1,1:128] <- data[1,1:128]
empty
class(data[1,1:128])
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[1,1:128] <- as.vector(data[1,1:128])
rm(empty)
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[1,1:4]
empty[1,1:4] <- 1:4
empty
data[1,1:4]
as.vector(data[1,1:4])
as.matrix(data[1,1:4])
as.numeric(data[1,1:4])
empty[1,1:128] <- as.numeric(data[1,1:128])
empty
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
for(j in 0:87) empty[j+1,1:128] <- as.numeric(data[j,1:128])
empty
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
88*2
88*2-1
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
for(j in 1:88) empty[2*j-1,1:128] <- as.numeric(data[j,1:128])
empty
2*87+1
for(j in 1:88) empty[2*j,1:128] <- as.numeric(data[j,129:256])
empty
t(empty)
t(empty[1:2,])
empty[1:2]
empty[1:2,]
empty[1:2,]
t(empty[1:2,])
t(empty[1:2,1:3])
t<-c()
rbind(t,t(empty[1:2,1:3]))
for(i in 1:88) {
t <- rbind(t,  t(empty[i:i+1,]))
for(i in 1:88) {
t <- rbind(t,  t(empty[i:i+1,]))
}
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[i:i+1,]))
}
t
t(empty[1:2,1:3])
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):i+1,]))
}
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):2*i,]))
}
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
t
t[130,]
t[129,]
t[129,1]
for(i in 1:88){
subjID <- rep(t[130*i-1,1], each=130)
}
subjID
subjID <- c()
for(i in 1:88){
subjID <- c(subjID,rep(t[130*i-1,1], each=130))
}
subjID
subjID <- c()
group <- c()
for(i in 1:88){
subjID <- c(subjID,rep(t[130*i-1,1], each=130))
group <-c(group, rep(t[130*i,1], each=130))
}
group
nrow(t)
cbind(t,subjID,group)
data <- cbind(t,subjID,group)
for(i in 1:88) 130*i
for(i in 1:88) loc <- c(loc, 130*i)
loc <- c()
for(i in 1:88) loc <- c(loc, 130*i)
loc
loc <- c()
for(i in 1:88) loc <- c(loc, 130*i-1, 130*i)
loc
data[-loc,]
data <- data[-loc,]
data[,1]==0
loc <- c(
which(data[,1]==0)
)
loc <- c()
which(data[,1]==0)
loc <- which(data[,1]==0)
data[-loc,]
data <- read.table("managed sample data.txt")
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
for(j in 1:88) empty[2*j-1,1:128] <- as.numeric(data[j,1:128])
for(j in 1:88) empty[2*j,1:128] <- as.numeric(data[j,129:256])
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
subjID <- c()
group <- c()
for(i in 1:88){
subjID <- c(subjID,rep(t[130*i-1,1], each=130))
group <-c(group, rep(t[130*i,1], each=130))
}
data <- cbind(t,subjID,group)
data
subjID <- c(subjID,rep(t[130*i-1,1], each=130))
subjID
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
for(j in 1:88) empty[2*j-1,1:128] <- as.numeric(data[j,1:128])
for(j in 1:88) empty[2*j,1:128] <- as.numeric(data[j,129:256])
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
subjID <- c()
group <- c()
for(i in 1:88){
subjID <- c(subjID,rep(t[130*i-1,1], each=130))
group <-c(group, rep(t[130*i,1], each=130))
}
data <- cbind(t,subjID,group)
data
daa
data
data <- read.table("managed sample data.txt")
data
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
empty
data$subjID
data <- read.table("managed sample data.txt")
data
data <- rename(subjID=V257, group=V258)
data <- rename(data, subjID=V257, group=V258)
data
##
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
empty
for(j in 1:88) empty[2*j-1,1:128] <- as.numeric(data[j,1:128])
for(j in 1:88) empty[2*j,1:128] <- as.numeric(data[j,129:256])
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
subjID <- c()
group <- c()
for(i in 1:88){
subjID <- c(subjID,rep(t[130*i-1,1], each=130))
group <-c(group, rep(t[130*i,1], each=130))
}
data <- cbind(t,subjID,group)
data
head(data)
trial <- c()
rep(1:128, 88)
data <- cbind(t,subjID,group, trial)
data
trial <- rep(1:128, 88)
data <- cbind(t,subjID,group, trial)
trial
data
t
nrow(t)
length(Trial)
length(trial)
11440/88
trial <- rep(1:130, 88)
data <- cbind(t,subjID,group, trial)
data
loc <- c()
for(i in 1:88) loc <- c(loc, 130*i-1, 130*i)
data <- data[-loc,]
loc <- which(data[,1]==0)
data[-loc,]
data <- data[-loc,]
data
data <- as.data.frame(data)
colnames(data)
data <- rename(data, subjID=subjID, group=group,trial=trial, deck=V1, outcome=V2)
head(data)
data <- rename(data, deck=V1, outcome=V2)
data <- select(subjID, group, trial, deck, outcome)
data <- select(data, subjID, group, trial, deck, outcome)
head(data)
rm(list=ls())
data <- read.table("managed sample data.txt")
library(dplyr)
head(Data)
head(data)
data <- rename(data, subjID=V257, group=V258)
empty <- matrix(NA, nrow=2*88, ncol=130)
empty[,129] <- rep(data$subjID, each=2)
empty[,130] <- rep(data$group, each=2) #1 control, 2 SDI
head(empty)
#Seperate deck choice and outcome
for(j in 1:88){
empty[2*j-1,1:128] <- as.numeric(data[j,1:128])
empty[2*j,1:128] <- as.numeric(data[j,129:256])
}
head(empty)
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
head(t)
head(empty)
head(t)
t
#Insert subjID and group index
empty <- matrix(NA, nrow=2*88, ncol=128)
data <- read.table("managed sample data.txt")
data <- rename(data, subjID=V257, group=V258)
#Seperate deck choice and outcome
for(j in 1:88){
empty[2*j-1,1:128] <- as.numeric(data[j,1:128])
empty[2*j,1:128] <- as.numeric(data[j,129:256])
}
head(empty)
#Transpose and row-bind trials
t <- c()
for(i in 1:88) {
t <- rbind(t,  t(empty[(2*i-1):(2*i),]))
}
#
subjID <- c()
group <- c()
data$subjID
rep(data$subjID, each=10)
subjID <- rep(data$subjID, each=128)
group <- rep(data$group, each=128)
group
trial <- rep(1:128, 88)
data.frame(t,subjID,group, trial)
data <- data.frame(t,subjID,group, trial)
#Remove empty trials
loc <- which(data[,1]==0)
loc
data <- data[-loc,]
data
data <-
data %>% rename(data, deck=V1, outcome=V2)
data %>% rename(data, deck=V1, outcome=V2)
data %>% rename(deck=V1, outcome=V2)
head(data)
data %>% rename(deck=X1, outcome=X2)
data %>% rename(deck=X1, outcome=X2) %>% select(subjID, group, trial, deck, outcome)
data %>% rename(deck=X1, outcome=X2) %>% select(subjID, group, trial, deck, outcome) %>% arrange(subjID) %>% head(10)
data <- data %>% rename(deck=X1, outcome=X2) %>% select(subjID, group, trial, deck, outcome) %>% arrange(subjID)
head(data)
?save
?write
write(data, file="reorganized data.txt")
write(data, file="reorganized data.txt", sep="\n")
write.table(data, file="reorganized data.txt")
read.table("reorganized data.txt")
library(knitr)
library(kableExtra)
load("Code17b_choice_s1-88_iter100.Rdata")
#SDI 1:39, control 40:88
##Table.3
dat_sdi <- parstack[1:39,1:3,5]
dat_control <- parstack[40:88,1:3,5]
mean_s <- apply(dat_sdi,2,mean)
mean_c <- apply(dat_control,2,mean)
median_s <- apply(dat_sdi,2,median)
median_c <- apply(dat_control,2, median)
sd_s <- apply(dat_sdi, 2, sd)
sd_c <- apply(dat_control, 2, sd)
t3 <- rbind(mean_c,mean_s,median_c,median_s,sd_c,sd_s)
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "Original Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
load("DY_MLE.Rdata")
#Control 1:49, SDI 50:88
##Table.3
dat_control <- parstack[1:49,1:3,5]
dat_sdi <- parstack[50:88,1:3,5]
mean_s <- apply(dat_sdi,2,mean)
mean_c <- apply(dat_control,2,mean)
median_s <- apply(dat_sdi,2,median)
median_c <- apply(dat_control,2, median)
sd_s <- apply(dat_sdi, 2, sd)
sd_c <- apply(dat_control, 2, sd)
t3 <- rbind(mean_c,mean_s,median_c,median_s,sd_c,sd_s)
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "DY Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
load("constrained.RData")
mean_par
median_par
sd_par
rbind(mean_par, median_par, sd_par)
t3 <- rbind(mean_par, median_par, sd_par) #duplicated rownames
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "Constrained Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
t3
t3 <- rbind(mean_par, median_par, sd_par) #duplicated rownames
t3 <- as.data.frame(t3)
t3
t3 <- rbind(mean_par, median_par, sd_par) #duplicated rownames
t3
rownames(t3)
rownames(t3) <- c("mean_c","mean_s","median_c","median_s","sd_c","sd_s")
t3
t3 <- as.data.frame(t3)
kable(t3, format = "html", caption = "Constrained Code", align="l") %>%
kable_styling(bootstrap_options = "striped",
full_width = F) %>%
add_header_above(c("Group"=1, "Parameters" = 3)) %>%
group_rows("Mean", 1,2) %>%
group_rows("Median", 3,4) %>%
group_rows("Standard deviation", 5,6)
rm(list=ls())  # remove all variables
# read the data file
dat = read.table("reorganized data.txt", header=T)
head(Data)
head(dat)
allSubjs = unique(dat$subjID)  # all subject IDs
allSubjs
N = length(allSubjs)      # number of subjects
T = table(dat$subjID)[1]  # number of trials per subject (=140)
T
table(dat$subjID)
table(dat$subjID) -> T
T
class(T)
T[1]
T[2]
dat
subset(dat,subjID==1)
subset(dat,subjID==1) -> tmp_data
dim(tmp_data)
T
T <- T[1]
T
subjattmat=matrix(nrow=3,ncol=T)
predpmat=matrix(-1,nrow=4, ncol=T)
subjattmat
subjattmat[,1]=curatt
curatt=rep((1/3),3)
subjattmat[,1]=curatt
predict(predpmat)
predpmat
